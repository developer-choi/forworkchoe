# RTL 테스트 코드 작성 가이드라인
이 문서는 React Testing Library(RTL)를 사용하여 테스트 코드를 작성할 때 AI가 따라야 할 핵심 철학과 규칙을 정의합니다.

## 1. 핵심 철학: 구현 세부 사항이 아닌, 행동을 테스트합니다.
   테스트의 최우선 목표는 컴포넌트의 내부 구현 방식이 아니라, 사용자가 경험하는 행동과 결과를 검증하는 것입니다.

- 테스트 대상 (O):
  - 사용자가 화면에서 보고 상호작용하는 모든 것. 
  - 컴포넌트의 렌더링 결과 (e.g., 텍스트, 역할). 
  - 사용자 상호작용(클릭, 타이핑)에 따른 UI 상태 변화. 
- 테스트 금지 대상 (X) - (구현 세부 사항):
  - CSS 클래스 이름 (e.g., .toHaveClass('my-button')) (CSS 모듈 사용 시 불가능)
  - 컴포넌트 내부 상태 (e.g., state.isLoading)
  - 컴포넌트 내부 함수의 호출 여부 
  - 특정 자식 컴포넌트의 사용 여부 (e.g., <Button>이 <Icon>을 렌더링하는지)

## 2. 쿼리(Query) 사용 우선순위
   테스트는 실제 사용자가 UI를 인지하는 방식과 가장 유사해야 합니다. 이를 위해 다음 쿼리 우선순위를 엄격하게 준수해야 합니다.

### 🥇 getByRole: (1순위)

사용자와 보조 기술(스크린 리더)이 인지하는 **'역할(Role)'**을 기반으로 찾습니다. (e.g., button, link, tab)

**name 옵션 (접근 가능한 이름)**과 함께 사용하는 것을 최우선으로 권장합니다. (e.g., getByRole('button', { name: '로그인' }))

getByRole로 찾을 수 없다면, 테스트 코드가 아니라 컴포넌트의 **웹 접근성(ARIA)**에 문제가 있을 확률이 높습니다.

### 🥈 getByLabelText: (폼 요소 1순위)

사용자가 <label>을 보고 <input>을 찾듯이, 레이블 텍스트로 폼 요소를 찾습니다. getByRole보다 폼 요소에 더 적합합니다.

### 🥉 3순위 getByPlaceholderText:

레이블이 없는 경우에만 차선책으로 사용합니다.

### 4순위 getByText:

버튼이나 링크가 아닌, 비상호작용 요소(e.g., div, p, span)의 텍스트를 찾을 때 사용합니다.

### 5순위 getByDisplayValue:

폼 요소에 이미 입력된 값을 기준으로 찾을 때 사용합니다.

### 6순위 getByAltText:

<img>, <area>, <input type="image">의 alt 텍스트로 찾습니다.

### 7순위 getByTitle:

title 속성은 접근성이 떨어지므로 사용을 권장하지 않습니다.

### 🚨 getByTestId: (최후의 보루)

사용자가 보거나 들을 수 없는 구현 세부 사항이므로 절대 우선 사용하지 않습니다.

오직 위 1~7번으로 도저히 찾을 수 없는 경우(e.g., 텍스트가 실시간으로 변하는 차트)에만 예외적으로 사용합니다.

## 3. 쿼리 접두사(Prefix) 사용법
   어떤 상황에 get/query/find를 써야 하는지 명확히 구분합니다.

1. getBy...
   용도: "엘리먼트가 지금 당장, 반드시 존재해야 함"을 검증할 때.

특징: 요소를 찾지 못하면(0개 또는 2개 이상) 즉시 에러를 던져 테스트를 실패시킵니다.

2. queryBy...
   용도: "엘리먼트가 존재하지 않아야 함"을 검증할 때.

특징: 요소를 찾지 못하면 null (All 버전은 [])을 반환합니다. (에러를 던지지 않음)

예시: expect(screen.queryByText('로딩 중')).not.toBeInTheDocument();

3. findBy...
   용도: "비동기 작업(API 호출 등) 후, 요소가 나타날 때까지 기다려야 함"을 검증할 때.

특징: Promise를 반환합니다. await 키워드가 필수입니다. (기본 1초)

예시: expect(await screen.findByText('로딩 완료')).toBeInTheDocument();